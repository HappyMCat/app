{"version":3,"file":"js/418.0421ce8f.js","mappings":"oJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,QAAQ,WAAa,UAAU,YAAc,YAAYC,MAAM,CAACC,MAAOP,EAAIO,MAAOC,SAAS,SAAUC,GAAMT,EAAIO,MAAME,CAAG,EAAEC,WAAW,WAAWR,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACF,EAAG,IAAI,CAACS,MAAM,CAACC,OAAsB,gBAAfZ,EAAIa,QAA0BR,MAAM,CAAC,KAAO,gBAAgBS,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOf,EAAIgB,QAAQ,cAAc,IAAI,CAAChB,EAAIiB,GAAG,QAAQf,EAAG,IAAI,CAACS,MAAM,CAACC,OAAuB,OAAfZ,EAAIa,QAAiBR,MAAM,CAAC,KAAO,gBAAgBS,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOf,EAAIgB,QAAQ,KAAK,IAAI,CAAChB,EAAIiB,GAAG,QAAQjB,EAAIkB,GAAG,KAAKhB,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWL,EAAImB,SAAS,gBAAgB,SAASL,GAAG,CAAC,KAAOd,EAAIoB,QAAQd,MAAM,CAACC,MAAOP,EAAIqB,QAASb,SAAS,SAAUC,GAAMT,EAAIqB,QAAQZ,CAAG,EAAEC,WAAW,YAAYV,EAAIsB,GAAItB,EAAIuB,MAAM,SAASC,GAAM,OAAOtB,EAAG,cAAc,CAACuB,IAAID,EAAKE,GAAGrB,MAAM,CAAC,KAAOmB,IAAO,IAAG,IAAI,EACh7B,EACIG,EAAkB,CAAC,WAAY,IAAI3B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMuB,EAAQ,MAAqB,IAAM,OAChK,G,oBC2BA,GACAC,KAAA,cACAC,IAAAA,GACA,OACAP,KAAA,GACAF,SAAA,EACAF,UAAA,EACAY,QAAA,EACAlB,OAAA,cACAN,MAAA,GAEA,EACAyB,QAAA,CAOA,YAAAZ,GACAa,QAAAC,IAAA,OACA,MAAAC,QAAAC,EAAAA,EAAAA,IAAA,CACAL,QAAA,KAAAA,QACAM,SAAA,GACAxB,OAAA,KAAAA,SAIA,KAAAU,KAAAe,QAAAH,EAAAL,KAAAS,MACA,KAAAlB,SAAA,EACA,KAAAU,UACA,KAAAA,QAAAI,EAAAL,KAAAU,YACA,KAAArB,UAAA,EAEA,EACAH,OAAAA,CAAAH,GACA,KAAAA,OAAAA,EAEA,KAAAkB,QAAA,EACA,KAAAR,KAAA,GACA,KAAAJ,UAAA,EACA,KAAAC,SACA,KAAAC,SAAA,CACA,ICzEsP,I,UCQlPoB,GAAY,OACd,EACA1C,EACA4B,GACA,EACA,KACA,WACA,MAIF,EAAec,EAAiB,O,qKChBzB,MAAML,EAAcM,GAAUC,EAAAA,EAAQC,IAAI,mBAAoB,CAAEF,WAE1DG,EAAmBnB,GAAMiB,EAAAA,EAAQC,IAAI,kBAAmB,CAAEF,OAAQ,CAAEhB,QAEpEoB,EAAapB,GAAMiB,EAAAA,EAAQI,KAAK,iBAAkB,CAAErB,KAAIsB,QAAS,IAEjEC,EAAgBvB,GAAMiB,EAAAA,EAAQI,KAAK,iBAAkB,CAAErB,KAAIsB,QAAS,IAEpEE,EAA2BR,GAAUC,EAAAA,EAAQC,IAAI,sBAAuB,CAAEF,U","sources":["webpack://hmmj/./src/views/Article.vue","webpack://hmmj/src/views/Article.vue","webpack://hmmj/./src/views/Article.vue?c84a","webpack://hmmj/./src/views/Article.vue?25fc","webpack://hmmj/./src/api/article.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"article-page\"},[_c('van-search',{attrs:{\"shape\":\"round\",\"background\":\"#fb841d\",\"placeholder\":\"请输入搜索关键词\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('nav',{staticClass:\"my-nav vant-hairline--bottom\"},[_c('a',{class:{active:_vm.sorter === 'weight_desc'},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.hChange('weight_desc')}}},[_vm._v(\"推荐\")]),_c('a',{class:{active: _vm.sorter === null},attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.hChange(null)}}},[_vm._v(\"最新\")]),_vm._m(0)]),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('ArticleItem',{key:item.id,attrs:{\"item\":item}})}),1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logo\"},[_c('img',{attrs:{\"src\":require(\"@/assets/logo.png\"),\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"article-page\">\r\n    <van-search\r\n  v-model=\"value\"\r\n  shape=\"round\"\r\n  background=\"#fb841d\"\r\n  placeholder=\"请输入搜索关键词\"\r\n/>\r\n    <nav class=\"my-nav vant-hairline--bottom\">\r\n      <a  @click=\"hChange('weight_desc')\"\r\n       href=\"javascript:;\"\r\n       :class=\"{active:sorter === 'weight_desc'}\">推荐</a>\r\n      <a @click=\"hChange(null)\"\r\n      href=\"javascript:;\"\r\n      :class=\"{active: sorter === null}\">最新</a>\r\n      <div class=\"logo\"><img src=\"@/assets/logo.png\" alt=\"\"></div>\r\n    </nav>\r\n    <van-list\r\n      v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n    >\r\n\r\n      <ArticleItem :item=\"item\" v-for=\"item in list\" :key=\"item.id\"></ArticleItem>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import axios from 'axios'\r\nimport { getArticles } from '@/api/article'\r\nexport default {\r\n  name: 'ArticlePage',\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      current: 1,\r\n      sorter: 'weight_desc',\r\n      value: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // Load时间在页面滑动到底部时自动触发\r\n    // 触发时自动将loading改为true，然后去发请求\r\n    // 请求到数据后，将loading手动改为false\r\n    // 拿到数据后将数据追加到当前数据后\r\n    // 让页数增加，准备获取下一页数据\r\n    // 增加完成之后，判断是否大于总页数，大于则将finished设为false，不再请求没有数据了\r\n    async onLoad () {\r\n      console.log('到底了')\r\n      const res = await getArticles({\r\n        current: this.current, // 当前页数\r\n        pageSize: 10, // 每页获取多少条\r\n        sorter: this.sorter\r\n      })\r\n      // console.log(res)\r\n      // this.list = res.data.rows\r\n      this.list.push(...res.data.rows)\r\n      this.loading = false\r\n      this.current++\r\n      if (this.current > res.data.pageTotal) {\r\n        this.finished = true\r\n      }\r\n    },\r\n    hChange (sorter) {\r\n      this.sorter = sorter\r\n      // console.log(this.sorter)\r\n      this.current = 1\r\n      this.list = []\r\n      this.finished = false\r\n      this.onLoad()\r\n      this.loading = true\r\n    }\r\n\r\n  }\r\n  // 由于页面刚加载时，就是在底部会自动触发load时间发送请求\r\n  // 故不需要在created中再发送请求了\r\n  // async created () {\r\n  //   // const res = await axios.get('https://mock.boxuegu.com/mock/3083/articles')\r\n  //   // console.log(res)\r\n  //   // this.list = res.data.result.rows\r\n  //   const res = await getArticles({\r\n  //     current: 1,\r\n  //     pageSize: 10,\r\n  //     sorter: 'weight_desc'\r\n  //   })\r\n  //   console.log(res)\r\n  //   this.list = res.data.rows\r\n  // }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.article-page {\r\n  margin-bottom: 50px;\r\n  margin-top: 44px;\r\n  .my-nav {\r\n    height: 44px;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    z-index: 999;\r\n    background: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n    > a {\r\n      color: #999;\r\n      font-size: 14px;\r\n      line-height: 44px;\r\n      margin-left: 20px;\r\n      position: relative;\r\n      transition: all 0.3s;\r\n      &::after {\r\n        content: '';\r\n        position: absolute;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        bottom: 0;\r\n        width: 0;\r\n        height: 2px;\r\n        background: #222;\r\n        transition: all 0.3s;\r\n      }\r\n      &.active {\r\n        color: #222;\r\n        &::after {\r\n          width: 14px;\r\n        }\r\n      }\r\n    }\r\n    .logo {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      > img {\r\n        width: 64px;\r\n        height: 28px;\r\n        display: block;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// .article-page {\r\n//   margin-bottom: 50px;\r\n//   margin-top: 44px;\r\n//   .my-nav {\r\n//     height: 44px;\r\n//     position: fixed;\r\n//     left: 0;\r\n//     top: 0;\r\n//     width: 100%;\r\n//     z-index: 999;\r\n//     background: #fff;\r\n//     display: flex;\r\n//     align-items: center;\r\n//     > a {\r\n//       color: #999;\r\n//       font-size: 14px;\r\n//       line-height: 44px;\r\n//       margin-left: 20px;\r\n//         }\r\n//     .logo {\r\n//       flex: 1;\r\n//       display: flex;\r\n//       justify-content: flex-end;\r\n//       > img {\r\n//         width: 64px;\r\n//         height: 28px;\r\n//         display: block;\r\n//         margin-right: 10px;\r\n//             }\r\n//           }\r\n//         }\r\n// }\r\n// .head {\r\n//   display: flex;\r\n//   img {\r\n//     margin:0;\r\n//     padding:0;\r\n//     width: 40px;\r\n//     height: 40px;\r\n\r\n//   }\r\n//   p {\r\n//     margin: 0;\r\n//     line-height: 1.5;\r\n//     &.title {\r\n//       width: 180px;\r\n//     }\r\n//     &.other {\r\n//       font-size: 10px;\r\n//       color:#999;\r\n//     }\r\n//   }\r\n// }\r\n// .body {\r\n//   font-size: 14px;\r\n//   color: #666;\r\n//   line-height: 1.6;\r\n//   margin-top: 10px;\r\n// }\r\n// .foot {\r\n//   font-size: 12px;\r\n//   color: #999;\r\n//   margin-top: 10px;\r\n// }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=45c57d3e&scoped=true\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=45c57d3e&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45c57d3e\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n// import { getToken } from '@/utils/storage'\r\n// 封装API\r\nexport const getArticles = params => request.get('/interview/query', { params })\r\n\r\nexport const getArticleDetail = id => request.get('/interview/show', { params: { id } }) // 通过id值将文章渲染到面经详情页\r\n\r\nexport const updateLike = id => request.post('/interview/opt', { id, optType: 1 })\r\n\r\nexport const updateCollect = id => request.post('/interview/opt', { id, optType: 2 })\r\n\r\nexport const getArticlesCollectOrLike = params => request.get('/interview/opt/list', { params })\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","model","value","callback","$$v","expression","class","active","sorter","on","$event","hChange","_v","_m","finished","onLoad","loading","_l","list","item","key","id","staticRenderFns","require","name","data","current","methods","console","log","res","getArticles","pageSize","push","rows","pageTotal","component","params","request","get","getArticleDetail","updateLike","post","optType","updateCollect","getArticlesCollectOrLike"],"sourceRoot":""}